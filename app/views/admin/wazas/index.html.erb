<div class="d-flex justify-content-between align-items-center mb-2">
  <h1 class="h5 mb-0">技一覧</h1>
  <%= link_to "新規登録", new_admin_waza_path, class: "btn btn-primary btn-sm" %>
</div>

<div class="mb-3">
  <div class="form-label fw-bold mb-1 text-start">段位、技で絞り込み</div>

  <%= form_with url: admin_wazas_path, method: :get, local: true,
        data: { turbo: false },
        html: { id: "wazaFilters", class: "row g-2 align-items-end" } do %>

    <div class="col-auto">
      <label for="filter_rank_id" class="form-label fw-bold mb-1 d-block text-center">段位</label>
      <%= select_tag :rank_id,
            options_for_select([["すべて",""]] + @ranks.map { |r| [r.name, r.id] }, params[:rank_id]),
            id: "filter_rank_id", class: "form-select select-center",
            onchange: "this.form.requestSubmit()" %>
    </div>

    <div class="col-auto">
      <label for="filter_shinsa_set" class="form-label fw-bold mb-1 d-block text-center">技</label>
      <%= select_tag :shinsa_set,
            options_for_select([["すべて",""]] + @shinsa_keys.map { |k| [t('enums.waza.shinsa_set.'+k), k] }, params[:shinsa_set]),
            id: "filter_shinsa_set", class: "form-select select-center",
            onchange: "this.form.requestSubmit()" %>
    </div>

  <% end %>
</div>

<table class="table table-sm align-middle table-wazas w-100">
  <colgroup>
    <col class="col-rank">
    <col class="col-set">
    <col class="col-desc">
    <col class="col-videos">
    <col class="col-actions">
  </colgroup>

  <thead>
    <tr>
      <th class="text-center">段位</th>
      <th class="text-center">種類</th>
      <th class="text-start">技の説明</th>
      <th class="text-start">動画</th>
      <th class="text-start">操作</th>
    </tr>
  </thead>

  <tbody>
    <%= render partial: "wazas/row",
               collection: @wazas,
               as: :waza,
               locals: { public: false, show_actions: true } %>
  </tbody>
</table>
